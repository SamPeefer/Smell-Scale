<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lobby Smell Scale - Vote</title>
  <link rel="stylesheet" href="/style.css" />
</head>

<body>

<nav>
  <a href="index.html"><img src="/public/img/PPU.png" width="400"></a>
  <a href="index.html">Home</a>
  <a href="vote.html">Vote</a>
</nav>

<h1>Rank the Smell</h1>
<p>How Smelly is it in Lawrence Hall right now?</p>

<!-- Voting Form -->
<form action="/api/vote" method="POST" id="voteForm">
  <input type="hidden" name="value" id="ratingInput">

  <div class="vote-buttons">

<div class="container">
      <div class="image">
    <button type="button" onclick="submitVote(10)">
      <img src="/public/img/Voting Red-01.jpg" width="200" alt="4">
    </button></div>
    <div class="text">
    <p> Horrific</p>
    <p>9-10</p>
  </div>
</div>

<div class="container">
      <div class="image">
    <button type="button" onclick="submitVote(6)">
      <img src="/public/img/Voting Orange-01.jpg" width="200" alt="3">
    </button></div>
    <div class="text">
    <p>Bad</p>
    <p>6-8</p>
  </div>
</div>

<div class="container">
      <div class="image">
    <button type="button" onclick="submitVote(3)">
      <img src="/public/img/Voting Yellow-01.jpg" width="200" alt="2">
    </button></div>
    <div class="text">
    <p>Moderate</p>
    <p>4-5</p>
  </div>
</div>

<div class="container">
      <div class="image">
    <button type="button" onclick="submitVote(1)">
      <img src="/public/img/Voting Green-01.jpg" width="200" alt="1">
    </button></div>
    <div class="text">
    <p>Good!</p>
    <p>1-3</p>
  </div>
</div>

    </button>
  </div>
</form>

<script>
async function submitVote(value) {
  // set the hidden form value
  document.getElementById("ratingInput").value = value;

  // send vote to API
  await fetch("/api/vote", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ value })
  });

  // redirect
  window.location.href = "thanks.html";
}
</script>

</body>
</html>
